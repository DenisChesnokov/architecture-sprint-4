# Планирование: анализ, идентификация проблем и поиск решений

## 1. Анализ проблемных мест

### Архитектурные проблемы

1. **Проблемы масштабирования**
   - Один инстанс на каждое приложение без возможности горизонтального масштабирования
   - Единый инстанс БД для чтения и записи
   - Отсутствие возможности масштабирования вычислительно сложных операций (расчет стоимости)

2. **Проблемы с очередями и обработкой заказов**
   - Отсутствие приоритизации в очередях
   - Нет механизма отслеживания "потерянных" заказов
   - Отсутствие механизма контроля над тем, как долго заказ находится в каждом статусе

3. **Проблемы производительности**
   - Медленная загрузка дашборда MES
   - Длительное время расчета стоимости (до 30 минут для сложных моделей)
   - Неоптимальная работа с большими наборами данных

4. **Проблемы мониторинга и наблюдаемости**
   - Отсутствие централизованного мониторинга
   - Нет системы раннего оповещения о проблемах
   - Сложность отслеживания причин задержек в обработке заказов

### Процессные проблемы

1. **Проблемы с релизами**
   - Длительные задержки релизов из-за ручного тестирования
   - Блокировка всего релиза при обнаружении критичных багов
   - Отсутствие автоматизированного тестирования

2. **Проблемы с распределением нагрузки**
   - "Гонка" операторов за новыми заказами
   - Отсутствие справедливой системы распределения заказов
   - Неэффективное использование ресурсов операторов

## 2. Необходимые инициативы

### Архитектурные инициативы

1. **Масштабирование систем**
   - Внедрение автомасштабирования для всех сервисов
   - Разделение БД на read и write реплики
   - Внедрение кэширования для часто запрашиваемых данных

2. **Оптимизация очередей**
   - Внедрение системы приоритетов в RabbitMQ
   - Реализация механизма dead letter queue
   - Внедрение механизма отслеживания "застрявших" заказов

3. **Улучшение производительности**
   - Оптимизация запросов к БД в MES
   - Асинхронная загрузка данных в дашборде
   - Внедрение системы предварительного расчета стоимости

4. **Наблюдаемость и мониторинг**
   - Внедрение централизованной системы логирования
   - Настройка системы алертинга
   - Внедрение трейсинга для отслеживания заказов

### Процессные инициативы

1. **Улучшение процесса релизов**
   - Автоматизация тестирования
   - Внедрение feature toggles
   - Переход на continuous deployment

2. **Оптимизация работы операторов**
   - Внедрение справедливой системы распределения заказов
   - Автоматическое назначение заказов на операторов
   - Система мотивации, основанная не только на количестве взятых заказов

## 3. Приоритизация инициатив

### Критерии приоритизации
- Влияние на бизнес (потеря клиентов и контрактов)
- Скорость реализации
- Требуемые ресурсы
- Техническая сложность
- Зависимости между инициативами

### Целевая архитектура через полгода

1. **Масштабируемая инфраструктура**
   - Автомасштабирование сервисов
   - Разделенные read/write БД
   - Оптимизированная обработка очередей

2. **Улучшенная производительность**
   - Быстрый расчет стоимости
   - Оптимизированный дашборд MES
   - Эффективная система распределения заказов

3. **Надежная система мониторинга**
   - Полная наблюдаемость процессов
   - Автоматическое обнаружение проблем
   - Четкое отслеживание статусов заказов

### Топ-3 приоритетных инициативы на ближайшие полгода

1. **Внедрение автомасштабирования и оптимизация баз данных**
   - Критично для решения проблем с производительностью
   - Позволит справиться с растущей нагрузкой
   - Относительно быстрая реализация
   - Не требует значительных изменений в приложениях

2. **Оптимизация очередей и системы распределения заказов**
   - Решает проблему "потерянных" заказов
   - Улучшает работу операторов
   - Снижает риск потери клиентов
   - Можно реализовать без глобальной перестройки систем

3. **Внедрение системы мониторинга и алертинга**
   - Позволит быстро находить проблемы
   - Предотвращает потерю заказов
   - Дает метрики для дальнейшей оптимизации
   - Можно внедрять параллельно с другими изменениями

## Обоснование выбора топ-3 инициатив

Эти три инициативы выбраны как приоритетные, потому что:

1. Они напрямую решают наиболее критичные бизнес-проблемы:
   - Потеря клиентов из-за задержек
   - Проблемы с производительностью
   - "Потерянные" заказы

2. Они создают фундамент для дальнейших улучшений:
   - Масштабируемая инфраструктура позволит внедрять новые функции
   - Мониторинг даст данные для оптимизации
   - Улучшенная система очередей позволит лучше контролировать процессы

3. Они могут быть реализованы с текущей командой:
   - Есть DevOps инженер для работы с инфраструктурой
   - Бэкенд-разработчики могут заниматься очередями
   - Тестировщик может помогать с мониторингом

4. Они не требуют полной перестройки систем:
   - Можно внедрять постепенно
   - Минимальные риски при внедрении
   - Быстрый возврат инвестиций